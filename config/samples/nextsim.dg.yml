work_dir: '/bettik/yumengch-ext/DATA/nextsim.dg'   ##working directory for the experiment

python_env: '/bettik/yumengch-ext/NEDAS/config/samples/python_dahu.src'

job_submit:
  host: gricad
  scheduler: oar
  ppn: 32
  project: pr-sasip
  # one can choose `devel` queue or `standard` queue
  queue: devel
  walltime: 1800
  run_separate_jobs: True

nproc: 32          ##total number of processors

nens: 20         ##ensemble size
run_assim: True  ##if true, run the assimilation steps
run_diag: False
debug: True       ##if true, output debug data/message

time_start: '201001010000'       ##start time of the experiment, format ccyymmddHHMM
time_end: '201001040000'         ##end time of the experiment
time_assim_start: '201010300000' ##start time of the first analysis cycle
time_assim_end: '201001040000'   ##end time of the last analysis cycle
cycle_period: 24                 ##cycle period, in hours

obs_time_steps: [0]
obs_time_scale: 0
state_time_steps: [0]
state_time_scale: 0

grid_def:
  type: 'nextsim.dg'

state_def:
- name: 'seaice_conc'
  model_src: 'nextsim.dg'
  var_type: 'field'
  err_type: 'normal'
- name: 'seaice_thick'
  model_src: 'nextsim.dg'
  var_type: 'field'
  err_type: 'normal'

obs_def:
- name: 'seaice_conc'
  dataset_src: 'osisaf.ice_conc'
  dataset_dir: '/bettik/yumengch-ext/DATA/data/OSISAF'
  model_src: 'nextsim.dg'
  obs_window_min: -6
  obs_window_max: 0
  err:
    type: 'normal'
    std: 0.2
  hroi: 1e5
  vroi: 1e10
  troi: 24
  impact_on_state:
    seaice_conc: 1.0

use_synthetic_obs: False

model_def:
  nextsim.dg:
    config_file: '/bettik/yumengch-ext/NEDAS/models/nextsim/dg/default.yml'
    model_env: '/bettik/yumengch-ext/NEDAS/models/nextsim/dg/setup-gricad.src'
    model_config_file: '/bettik/yumengch-ext/NEDAS/models/nextsim/dg/template.cfg'
    nproc_per_run: 8    ##number of processors to run a forecast
    parallel_mode: openmp
    walltime: 10000     ##walltime in seconds
    ens_run_type: batch
    use_job_array: True
    ens_init_dir: '/bettik/yumengch-ext/DATA/nextsim.dg'
    truth_dir: ''

perturb:  ##leave blank, use nextsim.dg specific perturb settings

assim_mode: 'batch'
filter_type: 'ETKF'

inflation:
  type: 'posterior,relax'
  adaptive: True
  coef: 1.0

localization:
  htype: 'GC'
  vtype: 'GC'
  ttype: 'GC'

